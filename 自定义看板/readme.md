# 1.0-æ„å»ºåˆå§‹htmlç»“æ„

æ„å»ºä¸‰ä¸ªåŒºåŸŸ
1. h1è¯´æ˜--ç”¨äºè¯´è¯´æ˜å½“å‰é˜¶æ®µçš„å†…å®¹
2. æµ‹è¯•æŒ‰é’®--æ¯ä¸ªæŒ‰é’®æ‰§è¡Œä¸€ä¸ªå‡½æ•°,ç”¨äºæµ‹è¯•,åœ¨test.js
3. appä¸»åŠŸèƒ½åŒºâœ…âœ…âœ…

# 1.1-æ„å»ºç»“æ„æ•°æ®

## test.jsä¸­æ„å»ºåˆå§‹åŒ–æ•°æ®,è¿™é‡Œä¸€èˆ¬æ˜¯åç«¯ä¼ é€çš„æ–‡ä»¶æ•°æ®

æ•°æ®ç»“æ„ä¸ºjsonæ ¼å¼:[åˆå§‹ç»“æ„.json](æ•°æ®ç»“æ„/åˆå§‹ç»“æ„.json)
### å…±åŒç‚¹
1. id:å”¯ä¸€å€¼,å¿…é¡»å¾—æœ‰çš„å€¼
2. typeï¼šåªæœ‰3ç§typeä¸€ä¸ªæ˜¯columnåˆ—è¡¨ï¼Œä¸€ä¸ªæ˜¯taskä»»åŠ¡,ä¸€ç§ç‰¹æ®Šçš„åˆ—è¡¨finishColumn
   1. TODOåˆ›å»ºä¸åŒçš„å…ƒç´ ï¼ŒcolumnåŒ…å«taskï¼Œæ”¯æŒåˆ é™¤åˆ—è¡¨ï¼Œæ·»åŠ taskã€‚
   2. TODOtaskæ·»åŠ ä¸€ä¸ªcheckbox
   3. TODOfinishColumnï¼Œç‰¹æ®Šcolumnï¼ŒåŒ…å«çš„taskçš„checkboxè‡ªåŠ¨å‹¾é€‰ï¼Œæ”¯æŒå½±è—åˆ—è¡¨ï¼Œä¹Ÿæ”¯æŒæ·»åŠ task
3. styleï¼šæ”¯æŒå­—ä½“å’Œbackground
   1. TODOåˆ›å»ºä¸€ä¸ªè‰²å½©æŒ‰é’®ï¼Œå¯ä»¥æ”¹è‰²
4. tagsï¼šç”¨äºæ·»åŠ æ ‡ç­¾
   1. TODOåˆ›å»ºä¸€ä¸ªç­›é€‰æŒ‰é’®ï¼Œç”¨äºç­›é€‰
5. titleï¼šéƒ½å…·æœ‰æ ‡é¢˜ï¼Œå¯æ›´æ”¹

### ä¸åŒç‚¹ï¼šcolumn/finishColumn
1. å¸¦æœ‰childrenåˆ—è¡¨
### ä¸åŒç‚¹ï¼štask
1. å¸¦æœ‰dateï¼šåˆ›å»ºæ—¶é—´
2. å¸¦æœ‰deadlineï¼šåˆ°æœŸæ—¶é—´


## ç‚¹å‡»[é¦–æ¬¡æ¸²æŸ“]æŒ‰é’®,æ‰§è¡ŒinitialRender(åˆå§‹åŒ–æ•°æ®ç»“æ„)

æ‰§è¡Œrenderhtml(åˆå§‹åŒ–æ•°æ®ç»“æ„)

## renderhtml(æ•°æ®ç»“æ„,æ‰€è¦æ”¾çš„å®¹å™¨id),æ¸²æŸ“html

å¦‚æœæ²¡æœ‰ä¼ å…¥å®¹å™¨,åˆ™é»˜è®¤ä¸ºapp-container
å¦‚æœä¼ å…¥çš„å®¹å™¨ä¸å­˜åœ¨,åˆ™é»˜è®¤ä½¿ç”¨app-container
è°ƒç”¨renderdata()

## renderdata(æ•°æ®,å®¹å™¨)å¼€å§‹æ¸²æŸ“æ•°æ®
åˆ¤æ–­ä¼ å…¥æ•°æ®é›†,æ˜¯å¦ä¸ºæ•°ç»„
å¦‚æœä¸æ˜¯æ•°ç»„,æ˜¯å­—å…¸,åˆ™ç”¨[]åŒ…è£¹
å¦‚æœä¸æ˜¯å­—å…¸å’Œæ•°ç»„,åˆ™ç›´æ¥ç»ˆç«¯,console.warn
éå†æ•°ç»„æ¯ä¸€ä¸ªå…ƒç´ ,è°ƒç”¨processNode(å…ƒç´ æ•°æ®,è¦åŠ å…¥çš„çˆ¶å®¹å™¨)

## processNode(å…ƒç´ æ•°æ®,è¦åŠ å…¥çš„çˆ¶å®¹å™¨)
1. æ•°æ®å¿…é¡»å¾—æœ‰id,å¦‚æœæ²¡æœ‰,å°±æŠ¥é”™
2. é€‰æ‹©è¦æ“ä½œçš„node--æŸ¥æ‰¾æ˜¯å¦æœ‰è¿™ä¸ªid,å¦‚æœæœ‰åˆ™æ›´æ–°,å¦‚æœæ²¡æœ‰åˆ™åœ¨çˆ¶å®¹å™¨åˆ›å»ºå…¨æ–°çš„node(div class="node",ä½¿ç”¨ä¼ å…¥çš„æ•°æ®çš„id)
3. ä½¿ç”¨å˜é‡keyéå†æ•°æ®ç»“æ„æ‰€æœ‰çš„é”®å€¼(é™¤äº†idé”®å€¼)--æ‰¾åˆ°å¯¹è±¡[propertyHandlers],åˆ¤æ–­[key]æ˜¯å¦å­˜åœ¨,(propertyHandlersä¸­,æ¯ä¸ªkeyå¯¹åº”ä¸€ä¸ªå‡½æ•°)
4. å°†[è¦æ“ä½œçš„node]å’Œ[æ•°æ®ä¸­keyçš„å€¼]ä¼ å…¥ç»™[propertyHandlerså¯¹åº”keyçš„å‡½æ•°]

## propertyHandlers{},ä¸€ä¸ªä¸“é—¨å¤„ç†å„ç§å±æ€§çš„å¯¹è±¡
é’ˆå¯¹ä¸åŒå±æ€§å…·æœ‰ä¸åŒå¤„ç†æ–¹æ³•
é…åˆä¸€ä¸ªè¾…åŠ©å‡½æ•°--[findOrCreateElement] (çˆ¶å…ƒç´ :nodeèŠ‚ç‚¹,è¦æ‰¾çš„å…ƒç´ çš„class,å¦‚æœæ²¡æœ‰åˆ›å»ºçš„å…ƒç´ ,åˆ›å»ºçš„å…ƒç´ çš„class)
BUGğŸš©åˆ›å»ºtypeï¼Œtitleï¼Œtagsï¼Œstyleï¼Œchildrençš„å‡½æ•°ğŸš©
TODOåç»­å¯ä»¥æ·»åŠ typeæ•°æ®,æ ¹æ®typeåˆ›å»ºå…ƒç´ ,ä»¥åŠå†…å®¹
### contentæ„å»ºæ–‡æœ¬å†…å®¹
æ‰¾åˆ°å®¹å™¨ä¸­æ˜¯å¦æœ‰classä¸ºcontentçš„å…ƒç´ ,æ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªP class=contentçš„å…ƒç´ 
å°†å…ƒç´ çš„textcontentæ”¹æˆcontent
### tagsæ·»åŠ æ ‡ç­¾(åˆ—è¡¨å¤„ç†ç¤ºä¾‹--æ¸…ç©ºåŸå§‹å†…å®¹,ä¸æ¸…ç©ºåŸå§‹å†…å®¹éœ€è¦è®¾ç½®id,ä¸ç„¶ä¸å¥½æ‰¾,åˆ—è¡¨ä¸å®¹æ˜“å®ç°)
åˆ¤æ–­æ˜¯å¦ä¸ºåˆ—è¡¨,ä¸æ˜¯çš„è¯å°±è¿”å›,ä¸æ‰§è¡Œ
æ‰¾åˆ°å®¹å™¨ä¸­æ˜¯å¦æœ‰classä¸ºtags-containerçš„å…ƒç´ ,æ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªdiv class=tags-containerçš„å…ƒç´ 
ç»§ç»­æ‰¾tagsContainerä¸­æœ‰æ²¡æœ‰ul,å¦‚æœæ²¡æœ‰åˆ›å»ºä¸€ä¸ªul(åˆ—è¡¨)
æ¸…ç©ºul,éå†tagåˆ—è¡¨,åˆ›å»ºli
### metadata(å­—å…¸å¤„ç†ç¤ºä¾‹--æ¸…ç©ºåŸå§‹å†…å®¹,ä¸æ¸…ç©ºåŸå§‹å†…å®¹éœ€è¦è®¾ç½®id,ä¸ç„¶ä¸å¥½æ‰¾,å­—å…¸å¯ä»¥å®ç°ä½†æ˜¯metadataä¸å¤ªéœ€è¦)
æŸ¥æ‰¾å®¹å™¨ä¸­æ˜¯å¦æœ‰metadata-containerå…ƒç´ ,æ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªdiv class=metadata-containerçš„å…ƒç´ 
æ¸…ç©ºmetadata
éå†æ‰€æœ‰çš„metadata,åˆ›å»ºä¸€ä¸ªspan,å°†keyçš„é¦–å­—æ¯å¤§å†™,åŠ ä¸Šåé¢çš„å­—ç¬¦,spançš„å†…å®¹ä¸ºé”®:å€¼
æ·»åŠ åˆ°metadata-container
### children(å­—å…¸é€’å½’ç¤ºä¾‹--ä¸æ¸…ç©ºåŸå§‹å†…å®¹)
æŸ¥æ‰¾å®¹å™¨æ˜¯å¦æœ‰children-containerå…ƒç´ ,æ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªdiv class=children-containerçš„å…ƒç´ 
é€’å½’è°ƒç”¨renderDataå‡½æ•°(childrençš„å€¼å½“ä½œæ•°æ®ç»“æ„ä¼ å…¥,å®¹å™¨ä¸ºchildren-container)


## updatarenderå‡½æ•°
åŒinitialrender
tagså’Œmetadateéƒ½ä¼šæ¸…ç©ºå†…å®¹é‡æ–°æ„å»º,ä½†æ˜¯æ•°æ®æ•°æ®æ¯”è¾ƒå°‘,æ‰€ä»¥æ— æ‰€è°“
childrenæ˜¯å¸¦æœ‰idçš„,å¯ä»¥åŠ¨æ€æ›´æ–°è€Œä¸åˆ å‡
TODOå¯ä»¥æ¯æ¬¡æ›´æ–°æ‰§è¡ŒsaveData
## clearRenderå‡½æ•°
ç›´æ¥å°†app-containerçš„å†…å®¹åˆ é™¤

## saveDataå‡½æ•°
log(å¼€å§‹å¯¼å‡ºæ•°æ®)
æ‰§è¡ŒsaveDataStructure()
### saveDataStructure(containerId = "app-container")
æ‰¾åˆ°è¦æå–å®¹å™¨çš„å…ƒç´ ,å¦‚æœæ²¡å¡«å†™é»˜è®¤ä¸ºapp-container(æ•´ä¸ªåº”ç”¨çš„å®¹å™¨)
æ²¡æ‰¾åˆ°æŠ¥é”™(å‡ ä¹ä¸å¯èƒ½å‡ºé”™,é™¤éapp-containeråˆ é™¤)
æœ€ç»ˆè¾“å‡ºçš„æ•°æ®ä¿å­˜åœ¨å˜é‡[exportedData],ç°åœ¨ä¸ºç©º
æ‰¾æ‰“app-container scopeä¸­classä¸ºnodeçš„å…ƒç´ 
éå†æ¯ä¸ªnode,æ‰§è¡Œ[extractNodeDataå‡½æ•°](#extractnodedataå‡½æ•°--è¿”å›dataæ•°æ®)
å¦‚æœå­˜åœ¨å°±æ·»åŠ åˆ°æœ€ç»ˆè¾“å‡ºçš„æ•°æ®[exportedData]
å°†æœ€ä¸­ä¿å­˜çš„æ•°æ®,jsonåŒ–,å¹¶è¿”å›
TODOä¼ é€ç»™åç«¯

#### extractNodeDataå‡½æ•°--è¿”å›dataæ•°æ®
æ ¹æ®ä¼ å…¥çš„å…ƒç´ æ¥æ„å»ºjsonæ•°æ®ç»“æ„
å¦‚æœæ²¡æœ‰id,ç›´æ¥è¿”å›æŠ¥é”™
##### æ„å»ºåˆå§‹åŒ–æ•°æ®ç»“æ„--{id:å…ƒç´ .id}
##### æ„å»ºcontentå†…å®¹
ä½¿ç”¨extractContent()æå–å†…å®¹
###### extractContent(å…ƒç´ )
æŸ¥æ‰¾.content,è·å–textContent,å¹¶è¿”å›
##### æ„å»ºtagså†…å®¹
ä½¿ç”¨extractTags()æå–å†…å®¹
###### extractTags(å…ƒç´ )
æŸ¥æ‰¾.tags-containerçš„ul
æ‰¾åˆ°æ‰€æœ‰çš„liçš„textcontent,åŠ å…¥åˆ°åˆ—è¡¨,è¿”å›åˆ—è¡¨
##### æ„å»ºtagså†…å®¹
ä½¿ç”¨extractMetadata()æå–å†…å®¹
###### Metadata(å…ƒç´ )
æŸ¥æ‰¾.metadata-container
æ‰¾åˆ°æ‰€æœ‰çš„spançš„textcontent,
æ ¹æ®å†’å·":"æ‹†åˆ†span,å‰é¢å˜æˆkey,åä¹°ä½ å˜æˆå€¼
åŠ å…¥åˆ°å­—å…¸,è¿”å›å­—å…¸
##### æ„å»ºchildrenå†…å®¹
ä½¿ç”¨extractChildren()æå–å†…å®¹
###### extractChildren(å…ƒç´ )
æŸ¥æ‰¾.children-container
è·å–å®¹å™¨å†…æ‰€æœ‰çš„nodeå…ƒç´ 

æ¯ä¸ªnodeä¼ å…¥[è·³è½¬åˆ°extractNodeData()é€’å½’ç”Ÿæˆ](#extractnodedataå‡½æ•°--è¿”å›dataæ•°æ®)

åŠ å…¥åˆ°åˆ—è¡¨,è¿”å›åˆ—è¡¨

# æ‰©å±•ç‚¹
TODOæ‰©å±•ç‚¹:css,æŸ¥çœ‹CodePen / JSFiddle / JSBinä¸Šçš„ç¤ºä¾‹æŠ„è¿‡æ¥.ç®€å•çš„å¯ä»¥ä½¿ç”¨Pinegrowæ¥å¯è§†åŒ–
TODOæ·»åŠ åç«¯
TODOæ ¹æ®é¡¹ç›®æ›´æ”¹æ•°æ®æ¨¡å‹,åªéœ€è¦è°ƒæ•´-[propertyHandelers],æ³¨å†Œå¹¶å®ç°åˆ›å»ºä¸åŒçš„æ•°æ®ç»“æ„å¯¹åº”çš„å‡½æ•°,[extractNodeData]ä¸­æ³¨å†Œå¹¶å®ç°ä¸åŒç±»å‹çš„æå–å‡½æ•°

